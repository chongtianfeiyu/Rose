SUB_PATH := external/opencv
FULL_SUB_PATH := $(LOCAL_PATH)/external/opencv

OPENCV_CC_ALL_SRCS := \
	$(subst $(FULL_SUB_PATH), $(SUB_PATH), \
	$(wildcard $(FULL_SUB_PATH)/3rdparty/carotene/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/autogenerated/protobuf/*.cc) \
	$(wildcard $(FULL_SUB_PATH)/modules/calib3d/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/calib3d/src/usac/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/core/src/opencl/runtime/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/core/src/utils/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/core/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/dnn/src/caffe/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/dnn/src/layers/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/dnn/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/features2d/src/kaze/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/features2d/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/flann/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/imgproc/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/ml/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/objdetect/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/photo/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/shape/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/stitching/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/video/src/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/detector/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/scale/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/zxing/common/binarizer/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/zxing/common/reedsolomon/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/zxing/common/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/zxing/qrcode/decoder/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/zxing/qrcode/detector/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/zxing/qrcode/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/zxing/*.cpp) \
	$(wildcard $(FULL_SUB_PATH)/modules/wechat_qrcode/src/*.cpp))

OPENCV_CC_EXCLUDE_SRCS := \
	$(SUB_PATH)/modules/core/src/convert.avx2.cpp \
	$(SUB_PATH)/modules/core/src/convert.fp16.cpp \
	$(SUB_PATH)/modules/core/src/convert.sse4_1.cpp \
	$(SUB_PATH)/modules/features2d/src/fast.avx2.cpp \
	$(SUB_PATH)/modules/imgproc/src/corner.avx.cpp \
	$(SUB_PATH)/modules/imgproc/src/filter.avx2.cpp \
	$(SUB_PATH)/modules/imgproc/src/imgwarp.avx2.cpp \
	$(SUB_PATH)/modules/imgproc/src/imgwarp.sse4_1.cpp \
	$(SUB_PATH)/modules/imgproc/src/resize.avx2.cpp \
	$(SUB_PATH)/modules/imgproc/src/resize.sse4_1.cpp \
	$(SUB_PATH)/modules/imgproc/src/undistort.avx2.cpp \
	$(SUB_PATH)/modules/objdetect/src/haar.avx.cpp
	
LOCAL_SRC_FILES += $(filter-out $(OPENCV_CC_EXCLUDE_SRCS), $(OPENCV_CC_ALL_SRCS))